<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script> <!-- Razorpay SDK -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>body{font-family:'Inter',sans-serif;}</style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-lg rounded-2xl shadow-xl overflow-hidden">
            
            <!-- Header -->
            <div class="bg-gray-900 p-6 text-white flex justify-between items-center">
                <h2 class="text-xl font-bold">Secure Checkout</h2>
                <a href="cart.html" class="text-sm text-gray-300 hover:text-white">Cancel</a>
            </div>

            <!-- Form -->
            <div class="p-8" id="checkout-form-container">
                <form onsubmit="startPayment(event)">
                    <h3 class="text-gray-900 font-bold mb-4">Shipping Address</h3>
                    
                    <div class="space-y-4 mb-6">
                        <input type="text" placeholder="Full Name" required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none">
                        <input type="email" placeholder="Email Address" required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none">
                        <input type="text" placeholder="Address" required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none">
                        <div class="grid grid-cols-2 gap-4">
                            <input type="text" placeholder="City" required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none">
                            <input type="text" placeholder="Zip Code" required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none">
                        </div>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg mb-6 flex justify-between items-center">
                        <span class="text-gray-600">Total to Pay:</span>
                        <span id="pay-amount" class="text-xl font-bold text-indigo-600">₹0</span>
                    </div>

                    <button type="submit" class="w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg">
                        Pay Now
                    </button>
                </form>
            </div>

            <!-- Success Message (Hidden Initially) -->
            <div id="success-view" class="hidden p-10 text-center">
                <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-4xl text-green-500">✓</span>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 mb-2">Order Placed!</h2>
                <p class="text-gray-500 mb-6">Your payment was successful.</p>
                <a href="index.html" class="block w-full bg-gray-900 text-white py-3 rounded-lg font-bold">Back to Home</a>
            </div>

        </div>
    </div>

    <script>
        // Calculate Total
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const total = cart.reduce((sum, item) => sum + item.price, 0);
        document.getElementById('pay-amount').innerText = "₹" + total;

        // Redirect if empty
        if(cart.length === 0) {
            alert("Your cart is empty");
            window.location.href = "shop.html";
        }

        function startPayment(e) {
            e.preventDefault(); // Stop form reload
            
            const options = {
                "key": "rzp_live_bVX9625cESvXdO", // Your Key
                "amount": total * 100, // Amount in paisa
                "currency": "INR",
                "name": "StyleStore",
                "description": "Order Payment",
                "image": "https://cdn-icons-png.flaticon.com/512/2965/2965250.png",
                "handler": function (response){
                    // Payment Success
                    localStorage.removeItem('cart'); // Clear cart
                    document.getElementById('checkout-form-container').classList.add('hidden');
                    document.getElementById('success-view').classList.remove('hidden');
                },
                "prefill": {
                    "name": "Customer",
                    "email": "test@example.com"
                },
                "theme": { "color": "#4f46e5" }
            };
            
            const rzp1 = new Razorpay(options);
            rzp1.open();
        }
    </script>
</body>
</html>